import{r as f,a as F,j as s,R as P,b as V,c as x,d as H,u as z,h as K}from"./Typography-Byh9fUcv.js";import{b as Y,S as L,u as q}from"./useExternRef-BpbbNXQC.js";import{K as J,I as D,O as Q,V as A,T as U}from"./VisuallyHidden-8Hixhu_K.js";import{H as W}from"./Headline-BNzsiov9.js";function X(r){const n=f.useRef();return f.useEffect(()=>{n.current=r}),n.current}const G=f.createContext({mode:"default",withGaps:!1,layoutFillMode:"auto",withScrollToSelectedTab:!1,scrollBehaviorToSelectedTab:"nearest"}),ie=r=>{var{children:n,mode:u="default",role:l="tablist",withScrollToSelectedTab:p,scrollBehaviorToSelectedTab:a="nearest",layoutFillMode:w="auto"}=r,I=F(r,["children","mode","role","withScrollToSelectedTab","scrollBehaviorToSelectedTab","layoutFillMode"]);const E=J(),{document:o}=D(),y=l==="tablist",b=f.useRef(null),k=u==="accent"||u==="secondary",v=()=>b.current?Array.from(b.current.querySelectorAll("[role=tab]:not([disabled])")):[];return Y(o,"keydown",h=>{if(!o||!b.current||!y)return;const m=Q(h);switch(m){case"ArrowLeft":case"ArrowRight":case"End":case"Home":{const c=v(),t=c.findIndex(d=>o.activeElement===d);if(t===-1)return;let e=0;m==="Home"?e=0:m==="End"?e=c.length-1:e=t+(m==="ArrowRight"?1:-1);const i=c[e];i&&(h.preventDefault(),i.focus());break}case"ArrowDown":{const t=v().find(d=>o.activeElement===d);if(!t||t.getAttribute("aria-selected")!=="true")return;const e=t.getAttribute("aria-controls");if(!e)return;const i=o.getElementById(e);if(!i)return;h.preventDefault(),i.focus();break}case"Space":case"Enter":{const t=v().find(e=>o.activeElement===e);t&&t.click()}}},{capture:!0}),s.jsx(P,V(H({},I),{baseClassName:x("vkuiTabs","vkuiInternalTabs",E==="vkcom"&&"vkuiInternalTabs--vkcom",k&&x("vkuiTabs--withGaps","vkuiInternalTabs--withGaps"),u==="default"&&"vkuiTabs--mode-default"),role:l,children:s.jsx("div",{className:"vkuiTabs__in",ref:b,children:s.jsx(G.Provider,{value:{mode:u,withGaps:k,layoutFillMode:w,withScrollToSelectedTab:p,scrollBehaviorToSelectedTab:a},children:n})})}))},Z={none:"vkuiTabsItem--sizeY-none",compact:"vkuiTabsItem--sizeY-compact"},$={default:"vkuiTabsItem--mode-default",accent:"vkuiTabsItem--mode-accent",secondary:"vkuiTabsItem--mode-secondary"},ee={stretched:"vkuiTabsItem--stretched",shrinked:"vkuiTabsItem--shrinked"},de=r=>{var{before:n,children:u,status:l,after:p,selected:a=!1,className:w,role:I="tab",tabIndex:E,getRootRef:o,hoverMode:y="vkuiTabsItem--hover",activeMode:b="",hovered:k,activated:v,hasHover:S,hasActive:h=!1,focusVisibleMode:m="inside"}=r,c=F(r,["before","children","status","after","selected","className","role","tabIndex","getRootRef","hoverMode","activeMode","hovered","activated","hasHover","hasActive","focusVisibleMode"]);const{sizeY:t="none"}=z(),{mode:e,withGaps:i,layoutFillMode:d,scrollBehaviorToSelectedTab:j,withScrollToSelectedTab:O}=f.useContext(G);let g=null;const B=I==="tab";K(l)&&(g=typeof l=="number"?s.jsxs(L,{Component:"span",className:x("vkuiTabsItem__status","vkuiTabsItem__status--count"),weight:"2",children:[s.jsx(A,{children:" "}),l]}):s.jsxs("span",{className:"vkuiTabsItem__status",children:[s.jsx(A,{children:" "}),l]}));let _=E;B&&_===void 0&&(_=a?0:-1);const T=q(o),M=X(a),N=O&&!(M===void 0)&&M!==a&&a,{document:R}=D();return f.useEffect(function(){if(!N||!T.current||!R)return;const C=T.current.getBoundingClientRect();if(!(C.top<0||C.bottom>R.documentElement.clientHeight))try{T.current.scrollIntoView({inline:j,block:"nearest",behavior:"smooth"})}catch(oe){}},[T,R,N,j]),s.jsxs(U,V(H({},c),{getRootRef:T,className:x("vkuiTabsItem",e&&$[e],a&&"vkuiTabsItem--selected",t!=="regular"&&Z[t],i&&"vkuiTabsItem--withGaps",d!=="auto"&&ee[d],w),hoverMode:y,activeMode:b,hasHover:S,hasActive:h,hovered:k,activated:v,focusVisibleMode:m,role:I,"aria-selected":a,tabIndex:_,children:[n&&s.jsx("div",{className:"vkuiTabsItem__before",children:n}),s.jsx(W,{Component:"span",className:"vkuiTabsItem__label",level:e==="default"?"1":"2",weight:"2",children:u}),g,p&&s.jsx("div",{className:"vkuiTabsItem__after",children:p}),e==="default"&&s.jsx("div",{className:"vkuiTabsItem__underline","aria-hidden":!0,"data-selected":a})]}))};export{ie as T,de as a,X as u};
