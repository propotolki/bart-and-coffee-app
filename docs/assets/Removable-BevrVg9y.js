import{r as v,a as k,u as T,j as o,b as g,c as u,d as h,R as B}from"./Typography-Byh9fUcv.js";import{b as w}from"./useExternRef-BpbbNXQC.js";import{K as x,T as I,V as j,I as E}from"./VisuallyHidden-8Hixhu_K.js";import{m as P}from"./Button-MhB0ftXQ.js";const _=e=>typeof e=="undefined"||e===null||typeof e=="boolean"||JSON.stringify(e)==="{}"?"":e.toString(),C=e=>!(e instanceof Array)&&!v.isValidElement(e)?_(e):v.Children.toArray(e).reduce((n,s)=>{let t="";const i=v.isValidElement(s),r=i&&"children"in s.props;return i&&r?t=C(s.props.children):i&&!r?t="":t=_(s),n.concat(t)},"");var A=P("Icon24Cancel","cancel_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="cancel_24"><path d="M7.536 6.264a.9.9 0 0 0-1.272 1.272L10.727 12l-4.463 4.464a.9.9 0 0 0 1.272 1.272L12 13.273l4.464 4.463a.9.9 0 1 0 1.272-1.272L13.273 12l4.463-4.464a.9.9 0 1 0-1.272-1.272L12 10.727z" /></symbol>',24,24);const S={none:"vkuiIconButton--sizeY-none",compact:"vkuiIconButton--sizeY-compact"},y=e=>{var{label:n,children:s,className:t}=e,i=k(e,["label","children","className"]);const r=x(),{sizeY:c="none"}=T();return o.jsxs(I,g(h({activeEffectDelay:200,activeMode:"background",Component:i.href?"a":"button"},i),{className:u("vkuiIconButton",c!=="regular"&&S[c],r==="ios"&&"vkuiIconButton--ios",t),children:[n&&o.jsx(j,{children:n}),s]}))},z=({onRemove:e,removePlaceholder:n,removePlaceholderString:s,children:t,toggleButtonTestId:i,removeButtonTestId:r,disabled:c})=>{const{window:p}=E(),l=v.useRef(null),d=v.useRef(!0),[a,m]=v.useState(0);w(p,"click",()=>{a>0&&m(0)},{capture:!0});const b=()=>{if(a>0){var f;l==null||(f=l.current)===null||f===void 0||f.focus()}else d.current=!0},R=f=>{if(f.stopPropagation(),!l.current)return;const{offsetWidth:N}=l.current;d.current=!1,m(N)};return o.jsxs("div",{className:u("vkuiRemovable__content","vkuiInternalRemovable__content"),style:{transform:`translateX(-${a!=null?a:0}px)`},onTransitionEnd:b,children:[o.jsxs(y,{hasActive:!1,hasHover:!1,className:u("vkuiRemovable__action","vkuiRemovable__toggle","vkuiInternalRemovable__action"),onClick:R,disabled:a>0||c,"data-testid":i,children:[o.jsx(j,{children:s}),o.jsx("i",{className:"vkuiRemovable__toggle-in",role:"presentation"})]}),typeof t=="function"?t({isRemoving:a>0}):t,o.jsx("span",{className:"vkuiRemovable__offset","aria-hidden":!0}),o.jsx(I,{Component:"button",hasActive:!1,hasHover:!1,disabled:d.current,getRootRef:l,className:"vkuiRemovable__remove",onClick:e,"data-testid":r,children:o.jsx("span",{className:"vkuiRemovable__remove-in",children:n})})]})},Y=e=>{var{children:n,onRemove:s,removePlaceholder:t="Удалить",align:i="center",indent:r=!1,toggleButtonTestId:c,removeButtonTestId:p,disabled:l}=e,d=k(e,["children","onRemove","removePlaceholder","align","indent","toggleButtonTestId","removeButtonTestId","disabled"]);const a=x(),m=R=>{R.preventDefault(),s==null||s(R)},b=C(t);return o.jsxs(B,g(h({},d),{baseClassName:u(a==="ios"&&"vkuiRemovable--ios",i==="start"&&"vkuiRemovable--align-start",r&&"vkuiRemovable--indent"),children:[a!=="ios"&&o.jsxs("div",{className:u("vkuiRemovable__content","vkuiInternalRemovable__content"),children:[typeof n=="function"?n({isRemoving:!1}):n,o.jsx(y,{activeMode:"opacity",hoverMode:"opacity",className:u("vkuiRemovable__action","vkuiInternalRemovable__action"),onClick:m,label:b,"data-testid":p,disabled:l,children:o.jsx(A,{role:"presentation"})}),o.jsx("span",{className:"vkuiRemovable__offset","aria-hidden":!0})]}),a==="ios"&&o.jsx(z,{onRemove:m,removePlaceholder:t,removePlaceholderString:b,toggleButtonTestId:c,removeButtonTestId:p,disabled:l,children:n})]}))};export{y as I,Y as R,A as a,C as g};
