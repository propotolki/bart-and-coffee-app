import{r as c,a as x,$ as j,j as t,R as I,b as C,c as m,d as T,W as y,Z as N,a4 as E}from"./_plugin-vue_export-helper-CR7FrT2r.js";import{a as B}from"./useGlobalEventListener-xhFFMBx8.js";import{I as g,a as P}from"./IconButton-CJDG5Ox1.js";const _=e=>typeof e=="undefined"||e===null||typeof e=="boolean"||JSON.stringify(e)==="{}"?"":e.toString(),k=e=>!(e instanceof Array)&&!c.isValidElement(e)?_(e):c.Children.toArray(e).reduce((i,n)=>{let o="";const l=c.isValidElement(n),r=l&&"children"in n.props;return l&&r?o=k(n.props.children):l&&!r?o="":o=_(n),i.concat(o)},""),S=({onRemove:e,removePlaceholder:i,removePlaceholderString:n,children:o,toggleButtonTestId:l,removeButtonTestId:r,disabled:p})=>{const{window:f}=y(),a=c.useRef(null),v=c.useRef(!0),[s,d]=c.useState(0);B(f,"click",()=>{s>0&&d(0)},{capture:!0});const R=()=>{if(s>0){var u;a==null||(u=a.current)===null||u===void 0||u.focus()}else v.current=!0},b=u=>{if(u.stopPropagation(),!a.current)return;const{offsetWidth:h}=a.current;v.current=!1,d(h)};return t.jsxs("div",{className:m("vkuiRemovable__content","vkuiInternalRemovable__content"),style:{transform:`translateX(-${s!=null?s:0}px)`},onTransitionEnd:R,children:[t.jsxs(g,{hasActive:!1,hasHover:!1,className:m("vkuiRemovable__action","vkuiRemovable__toggle","vkuiInternalRemovable__action"),onClick:b,disabled:s>0||p,"data-testid":l,children:[t.jsx(N,{children:n}),t.jsx("i",{className:"vkuiRemovable__toggle-in",role:"presentation"})]}),typeof o=="function"?o({isRemoving:s>0}):o,t.jsx("span",{className:"vkuiRemovable__offset","aria-hidden":!0}),t.jsx(E,{Component:"button",hasActive:!1,hasHover:!1,disabled:v.current,getRootRef:a,className:"vkuiRemovable__remove",onClick:e,"data-testid":r,children:t.jsx("span",{className:"vkuiRemovable__remove-in",children:i})})]})},V=e=>{var{children:i,onRemove:n,removePlaceholder:o="Удалить",align:l="center",indent:r=!1,toggleButtonTestId:p,removeButtonTestId:f,disabled:a}=e,v=x(e,["children","onRemove","removePlaceholder","align","indent","toggleButtonTestId","removeButtonTestId","disabled"]);const s=j(),d=b=>{b.preventDefault(),n==null||n(b)},R=k(o);return t.jsxs(I,C(T({},v),{baseClassName:m(s==="ios"&&"vkuiRemovable--ios",l==="start"&&"vkuiRemovable--align-start",r&&"vkuiRemovable--indent"),children:[s!=="ios"&&t.jsxs("div",{className:m("vkuiRemovable__content","vkuiInternalRemovable__content"),children:[typeof i=="function"?i({isRemoving:!1}):i,t.jsx(g,{activeMode:"opacity",hoverMode:"opacity",className:m("vkuiRemovable__action","vkuiInternalRemovable__action"),onClick:d,label:R,"data-testid":f,disabled:a,children:t.jsx(P,{role:"presentation"})}),t.jsx("span",{className:"vkuiRemovable__offset","aria-hidden":!0})]}),s==="ios"&&t.jsx(S,{onRemove:d,removePlaceholder:o,removePlaceholderString:R,toggleButtonTestId:p,removeButtonTestId:f,disabled:a,children:i})]}))};export{V as R,k as g};
