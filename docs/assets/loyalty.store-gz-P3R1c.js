import{k as m,r as a,f as r}from"./index-BM9-ZzJv.js";const S=m("loyalty",()=>{const l={initial:{name:"Начальный",discount:1,minSpending:0},beginner:{name:"Новичок",discount:2,minSpending:1e3},coffee_lover:{name:"Любитель кофе",discount:3,minSpending:3e3},platinum:{name:"Платиновый",discount:5,minSpending:5e3}},n=a("initial"),t=a(0),s=a(0),u=r(()=>l[n.value]),i=r(()=>{const e=Object.keys(l),o=e.indexOf(n.value);return o<e.length-1?l[e[o+1]]:null}),d=r(()=>{if(!i.value)return 100;const e=t.value,o=i.value.minSpending,v=u.value.minSpending;return Math.min(100,(e-v)/(o-v)*100)}),f=e=>e*u.value.discount/100,p=e=>{t.value+=e,s.value+=Math.floor(e/10),c()},c=()=>{t.value>=5e3&&n.value!=="platinum"?n.value="platinum":t.value>=3e3&&n.value!=="coffee_lover"?n.value="coffee_lover":t.value>=1e3&&n.value!=="beginner"&&(n.value="beginner")};return{loyaltyLevels:l,currentLevel:n,monthlySpending:t,totalPoints:s,currentLevelInfo:u,nextLevelInfo:i,progressToNextLevel:d,calculateDiscount:f,addPurchase:p,updateLoyaltyLevel:c,resetMonthlySpending:()=>{t.value=0}}});export{S as u};
